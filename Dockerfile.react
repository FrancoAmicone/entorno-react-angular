# Dockerfile para React
FROM node:18-alpine

# Informaci贸n del mantenedor
LABEL maintainer="DevOps Team"
LABEL description="React Development Environment"

# Establecer directorio de trabajo
WORKDIR /app

# Instalar create-react-app globalmente
RUN npm install -g create-react-app

# Crear directorio para el c贸digo fuente
RUN mkdir -p /app/src

# Crear una aplicaci贸n React por defecto si no existe
RUN if [ ! -f "/app/src/package.json" ]; then \
        cd /app && \
        npx create-react-app src --template typescript && \
        cd /app/src && \
        echo "GENERATE_SOURCEMAP=false" >> .env && \
        echo "HOST=0.0.0.0" >> .env; \
    fi

# Cambiar al directorio del c贸digo fuente
WORKDIR /app/src

# Instalar dependencias si existe package.json
RUN if [ -f "package.json" ]; then npm install; fi

# Exponer puerto 3000
EXPOSE 3000

# Configurar variable de entorno para React
ENV REACT_APP_HOST=0.0.0.0
ENV HOST=0.0.0.0

# Comando por defecto para desarrollo
CMD ["npm", "start"]